{% include 'partials/header.html' %}

<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3">Landlord Account Statement</h1>
        <a href="{{ url_for('landlords_list') }}" class="btn btn-primary">
            <i class="fas fa-list"></i> All Landlords
        </a>
    </div>

    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">List of Landlords</h6>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="landlordsTable" width="100%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Landlord Name</th>
                            <th>Phone</th>
                            <th>Email</th>
                            <th>Total Properties</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% if landlords %}
                            {% for landlord in landlords %}
                            <tr>
                                <td>{{ loop.index }}</td>
                                <td>{{ landlord.full_name }}</td>
                                <td>{{ landlord.phone }}</td>
                                <td>{{ landlord.email or '-' }}</td>
                                <td>
                                    <span class="badge bg-info">{{ landlord.total_properties }}</span>
                                </td>
                                <td>
                                    <a href="{{ url_for('landlord_account_detail', landlord_id=landlord.id) }}" 
                                       class="btn btn-primary btn-sm"
                                       title="View Statement">
                                        <i class="fas fa-eye"></i> View Statement
                                    </a>
                                    <a href="{{ url_for('add_landlord_transaction', landlord_id=landlord.id) }}" 
                                       class="btn btn-success btn-sm"
                                       title="Add Transaction">
                                        <i class="fas fa-plus"></i> Add Transaction
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        {% else %}
                            <tr>
                                <td colspan="6" class="text-center text-muted py-4">
                                    <i class="fas fa-info-circle"></i> No landlords found.
                                </td>
                            </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

{% include 'partials/modals.html' %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.all.min.js"></script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Flash messages
    const flashMessages = document.getElementById('flash-messages');
    if (flashMessages) {
        const messages = flashMessages.getElementsByClassName('message');
        if (messages.length > 0) {
            Swal.fire({
                title: 'Notification',
                text: messages[0].textContent,
                icon: 'info',
                confirmButtonText: 'OK'
            });
        }
    }
});
</script>

</body>
</html>